# kgateway Helm values for Confidential Platform
# Version: v2.1.2

# Image pull policy - use Never for local confidential images
image:
  pullPolicy: Never

# Gateway deployment settings
gateway:
  enabled: true
  replicas: 1
  
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 1000m
      memory: 512Mi

# Security context - allow writable filesystem for envoy temp files
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  allowPrivilegeEscalation: false
  # Note: readOnlyRootFilesystem disabled - envoy needs to write temp files
  capabilities:
    drop:
      - ALL
    add:
      - NET_BIND_SERVICE

# Service type
service:
  type: LoadBalancer
  # For local development with kind/k3s/minikube
  # type: NodePort

# Logging
logging:
  level: info
